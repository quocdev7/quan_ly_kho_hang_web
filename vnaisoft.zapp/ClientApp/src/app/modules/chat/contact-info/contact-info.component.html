<div class="flex flex-col flex-auto h-full bg-card dark:bg-default" *ngIf="!check_show_file" data-aos="fade-right"
    data-aos-once="true">
    <div class="overflow-y-auto">
        <!-- Contact avatar & info -->
        <div class="flex flex-col items-center mt-8">
            <div class="w-40 h-40 rounded-full relative">
                <ng-container *ngIf="chat.conversation_group_image">
                    <img class="w-full h-full rounded-full object-cover" [src]="chat.conversation_group_image"
                        [alt]="'Contact avatar'">
                    <div
                        class="absolute bottom-2 right-1 ring-2 ring-blue-500 w-8 h-8 flex items-center justify-center p-2  rounded-full bg-gray-300 mx-auto">
                        <div (click)="openDialogAvatar()" class="flex items-center">
                            <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:camera'"></mat-icon>
                        </div>
                    </div>
                </ng-container>
                <ng-container *ngIf="!chat.conversation_group_image">
                    <div
                        class="relative flex items-center justify-center w-full h-full rounded-full text-8xl font-semibold uppercase bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200">
                        {{chat.conversation_group_name.charAt(0)}}
                        <div
                            class="absolute bottom-2 right-1 ring-2 ring-blue-500 w-8 h-8 flex items-center justify-center p-2  rounded-full bg-gray-300 mx-auto">
                            <div (click)="openDialogAvatar()" class="flex items-center">
                                <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:camera'"></mat-icon>
                            </div>
                        </div>
                    </div>
                </ng-container>
            </div>
            <div class="mt-4 text-lg font-medium flex flex-row">

                <span class="mx-2">{{chat.conversation_group_name}}</span>

                <div
                    class="bottom-2 right-1 ring-2 ring-blue-500 w-6 h-6 flex items-center justify-center p-2  rounded-full bg-gray-300 mx-auto">
                    <div (click)="openDialogName()" class="flex items-center">
                        <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:pencil'"></mat-icon>
                    </div>
                </div>
            </div>
        </div>
        <div class="flex flex-row flex-auto px-6 pt-4">
            <div class="flex-1 flex-col" (click)="openDialogAddUser()"
                *ngIf="chat.conversation_group_user_id_owner==currentUser.id">
                <div class="flex items-center justify-center">
                    <mat-icon>person_add</mat-icon>
                </div>
                <div class="flex items-center justify-center">
                    <span style="font-size: 14px;">Thêm thành viên</span>
                </div>
            </div>
            <div class="flex-1 flex-col" (click)="openDialogBackground()">
                <div class="flex items-center justify-center">
                    <mat-icon>image</mat-icon>
                </div>
                <div class="flex items-center justify-center">
                    <span style="font-size: 14px;">Đổi hình nền</span>
                </div>
            </div>
            <!-- <div class="flex-1 flex-col" (click)="close_open_show_search()">
                <div class="flex items-center justify-center">
                    <mat-icon>search</mat-icon>
                </div>
                <div class="flex items-center justify-center">
                    <span style="font-size: 14px;">Tìm kiếm</span>
                </div>
            </div> -->
            <div class="flex-1 flex-col" (click)="openDialogNotification()">
                <div class="flex items-center justify-center">
                    <mat-icon>notifications_off</mat-icon>
                </div>
                <div class="flex items-center justify-center">
                    <span style="font-size: 14px;">Tắt thông báo</span>
                </div>
            </div>
        </div>
        <div class="w-full mt-5">
            <mat-expansion-panel style="box-shadow: none;" (opened)="panelOpenStateMedia = true"
                (closed)="panelOpenStateMedia = false">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Ảnh, File và liên kết
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="flex p-4" (click)="open_show_file(2)">
                    <div class="flex">
                        <mat-icon class="mr-4">image</mat-icon>
                        <span>
                            <span class="font-medium">Ảnh</span>
                        </span>
                    </div>
                </div>
                <div class="flex p-4" (click)="open_show_file(3)">
                    <div class="flex">
                        <mat-icon class="mr-4" svgIcon="heroicons_solid:document-text"></mat-icon>
                        <span>
                            <span class="font-medium">File</span>
                        </span>
                    </div>
                </div>
                <div class="flex p-4" (click)="open_show_file(1)">
                    <div class="flex">
                        <mat-icon class="mr-4" svgIcon="heroicons_solid:link"></mat-icon>
                        <span>
                            <span class="font-medium">Liên kết</span>
                        </span>
                    </div>
                </div>
            </mat-expansion-panel>
        </div>
        <div class="px-6">
            <div class="flex p-4">
                <mat-icon class="mr-4" svgIcon="heroicons_solid:calculator"></mat-icon>
                <span>
                    <span class="font-medium">Thống kê sử dụng</span>
                </span>
            </div>
            <div class="flex p-4">
                <span>
                    <span class="font-medium">Tổng số tin nhắn: </span> <span>{{chat_conversation_message.length}} Tin
                        nhắn</span>
                </span>
            </div>
            <div class="flex p-4">
                <span>
                    <span class="font-medium">Tổng dung lượng lưu trữ:</span> <br>
                    <span>{{formatSizeUnits(chat.count_total_file_size)}} / 1.00GB</span>
                </span>
            </div>
        </div>
        <div class="px-6">
            <div class="flex">
                <span>
                    <span class="font-medium">Thành viên: </span> <span>({{list_user.length}})</span>
                </span>
            </div>
            <div class="flex">
                <span class="font-medium">Chỉ có quản trị mới được thêm thành viên</span>
            </div>
            <div class=" py-2" *ngFor="let item of list_user">
                <div class="flex justify-between items-center">
                    <div class="flex flex-row">
                        <div class=" flex flex-0 items-center justify-center w-10 h-10">
                            <!-- conversation_group_user_id_owner -->
                            <ng-container *ngIf="item.avatar_path!=''">
                                <img class="w-full h-full rounded-full object-cover" [src]="item.avatar_path" alt="" />
                            </ng-container>
                            <ng-container
                                *ngIf="item.avatar_path==='' || item.avatar_path=== null || item.avatar_path=== undefined">
                                <div
                                    class="flex items-center justify-center w-full h-full rounded-full text-lg uppercase bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200">
                                    {{item.full_name.charAt(0)}}
                                </div>
                            </ng-container>
                        </div>
                        <div class="flex flex-row items-center min-w-0 ml-4">
                            <div class="font-medium leading-5 truncate">{{item.full_name}}</div>
                            <div *ngIf="chat.conversation_group_user_id_owner==item.Id" class="truncate bg-gray-200 rounded-xl p-2">Quản trị</div>
                        </div>
                    </div>
                    <div class="flex min-w-0 ml-4">

                        <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
                            <mat-icon svgIcon="heroicons_solid:dots-vertical"></mat-icon>
                        </button>
                        <mat-menu #menu="matMenu">
                            <button mat-menu-item>
                                <span>Xem trang cá nhân</span>
                            </button>
                            <button mat-menu-item *ngIf="chat.conversation_group_user_id_owner==currentUser.id">
                                <span>Xóa khỏi nhóm</span>
                            </button>
                        </mat-menu>
                    </div>
                </div>
            </div>
        </div>
        <div class="my-6 hover:text-red-600" (click)="exit_group()"
            style="border-bottom: 2px solid rgb(155, 151, 151); border-top: 2px solid rgb(155, 151, 151);">
            <div class=" p-4 text-center">
                <span class="font-medium">
                    Rời khỏi nhóm
                </span>
            </div>
        </div>
    </div>
</div>
<div class="flex flex-col flex-auto h-full bg-card dark:bg-default" *ngIf="check_show_file" data-aos="fade-right"
    data-aos-once="true">
    <div class="overflow-y-auto">
        <table class="w-full border" style="height: 50px;">
            <thead>
                <tr>
                    <th style="border-bottom-color: #006EFF;width: 4%;" class="text-base ">
                        <mat-icon class="icon-size-5 m-2" [svgIcon]="'mat_solid:close'" (click)="close_show_file()">
                        </mat-icon>
                    </th>
                    <th style="border-bottom-color: #006EFF;width: 32%;" class="text-base " (click)="toggleTabs(3)"
                        [ngClass]="{'text_color_tab ': openTab === 3, 'text-black ': openTab !== 3}"><span
                            transloco="system.file"></span></th>
                    <th style="border-bottom-color: #006EFF;width: 32%;" class="text-base " (click)="toggleTabs(2)"
                        [ngClass]="{'text_color_tab ': openTab === 2, 'text-black ': openTab !== 2}"><span
                            transloco="system.image"></span></th>
                    <th style="border-bottom-color: #006EFF;width: 32%;" class="text-base " (click)="toggleTabs(1)"
                        [ngClass]="{'text_color_tab ': openTab === 1, 'text-black ': openTab !== 1}"><span
                            transloco="system.link"></span></th>
                </tr>
            </thead>
        </table>
        <div class="px-2" *ngIf="openTab === 3">
            <!-- <span class="font-bold text-xl">Ngày 17/01/2023</span> -->
            <div class="flex flex-col" *ngFor="let item of list_file">
                <a href="https://bka.edu.vn/assets/images/groupchat.png">
                    <div class="flex flex-row w-full p-2 items-center justify-center">
                        <div class="w-1/3">
                            <div class="aspect-w-16 aspect-h-9 w-full">
                                <img class="h-full w-full object-contain"
                                    src="assets/images/whatsApp/Whatsapp-Wallpaper-2.jpg">
                            </div>
                        </div>
                        <div class="w-2/3">
                            <div class="pl-2">
                                <span class="text-lg font-semibold leading-7 text-title-color text-line-clamp-2">
                                    {{item.fileName}}
                                </span>
                                <span class="text-lg leading-7 font-medium text-title-color text-line-clamp-2">
                                    {{formatSizeUnits(item.fileSize)}}
                                </span>
                                <span class="text-base leading-7 text-title-color text-line-clamp-2">
                                    Tải lên bởi {{item.user_full_name}}
                                </span>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
        </div>
        <div class="px-2" *ngIf="openTab === 2">
            <!-- <span class="font-bold text-xl">Ngày 17/01/2023</span> -->
            <div class="overflow-y-auto overflow-hidden rounded-lg  max-w-sm grid grid-cols-4 gap-2 p-2">
                <div class="h-20 w-20" *ngFor="let item of list_image">
                    <img class="h-full w-full object-contain" src="https://bka.edu.vn/assets/images/groupchat.png">
                </div>
            </div>
        </div>
        <div class="px-2" *ngIf="openTab === 1">
            <!-- <span class="font-bold text-xl">Ngày 17/01/2023</span> -->
            <div class="flex flex-col" *ngFor="let item of list_link">
                <a href="{{change_parse_json_url(item.meta_tag).url_raw}}">
                    <div class="flex flex-row w-full p-2 items-center justify-center">
                        <div class="w-1/3">
                            <div class="aspect-w-16 aspect-h-9 w-full">
                                <img class="h-full w-full object-contain"
                                    src="{{change_parse_json_url(item.meta_tag).image}}">
                            </div>
                        </div>
                        <div class="w-2/3">
                            <div class="pl-2">
                                <a href="{{change_parse_json_url(item.meta_tag).url}}"
                                    class="text-blue-600 line-clamp-1">{{change_parse_json_url(item.meta_tag).url}}</a>
                                <span class="text-lg font-semibold leading-7 text-title-color text-line-clamp-2"
                                    style="max-height: 75px;">
                                    {{change_parse_json_url(item.meta_tag).title}}
                                </span>
                                <span class="text-lg leading-7 text-title-color text-line-clamp-2"
                                    style="max-height: 75px;">
                                    {{change_parse_json_url(item.meta_tag).description}}
                                </span>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>